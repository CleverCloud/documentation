<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Clever Cloud Documentation – Security</title>
    <link>https://lafillepassympa.com/developers/tags/security/</link>
    <description>Recent content in Security on Clever Cloud Documentation</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 07 Oct 2024 00:00:00 +0000</lastBuildDate>
    
	  <atom:link href="https://lafillepassympa.com/developers/tags/security/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>CVE-2024-47561: we upgraded Avro and Apache Pulsar</title>
      <link>https://lafillepassympa.com/developers/changelog/2024-10-07-cve-2024-47561/</link>
      <pubDate>Mon, 07 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/changelog/2024-10-07-cve-2024-47561/</guid>
      <description>
        
        
        &lt;p&gt;On October 4th, we were informed of &lt;a href=&#34;https://nvd.nist.gov/vuln/detail/CVE-2024-47561&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;a schema parsing vulnerability&lt;/a&gt; in the Java SDK of Apache Avro 1.11.3 and previous versions, allowing bad actors to execute arbitrary code. Our security team instantly made sanity checks, and listed impacted services.&lt;/p&gt;
&lt;p&gt;We upgraded our tools using Avro to 1.11.4. As Apache Pulsar was impacted, we upgraded our cluster to &lt;a href=&#34;https://github.com/apache/pulsar/releases/tag/v3.3.2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;version 3.3.2&lt;/a&gt;. The complete rolling of these updates is now ended, without any impact to our users. You can contact &lt;a href=&#34;https://console.clever-cloud.com/ticket-center-choice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;our support team&lt;/a&gt; if you have further questions about this topic.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>regreSSHion (CVE-2024-6387): our response</title>
      <link>https://lafillepassympa.com/developers/changelog/2024-07-10-cve-2024-6387/</link>
      <pubDate>Wed, 10 Jul 2024 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/changelog/2024-07-10-cve-2024-6387/</guid>
      <description>
        
        
        &lt;p&gt;On July 1st, we were informed that an unauthenticated Remote Code Execution (RCE) vulnerability that could grant an attacker full root access was found in OpenSSH’s server (&lt;code&gt;sshd&lt;/code&gt;) on glibc-based Linux systems. Our security team instantly made sanity checks, and listed impacted services.&lt;/p&gt;
&lt;p&gt;As stated &lt;a href=&#34;https://www.qualys.com/regresshion-cve-2024-6387/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;by Qualys&lt;/a&gt;, « &lt;em&gt;versions from 4.4p1 up to, but not including, 8.5p1 are not vulnerable due to a transformative patch for CVE-2006-5051, which made a previously unsafe function secure. The vulnerability resurfaces in versions from 8.5p1 up to, but not including, 9.8p1 due to the accidental removal of a critical component in a function.&lt;/em&gt; ».&lt;/p&gt;
&lt;p&gt;There was no known exploit for 64-bit systems, but we immediately strengthened firewall rules for port 22 and packaged OpenSSH 9.8p1. Then we deployed it on all our systems, images, managed services and started to redeploy applications gradually for our customers. This work is now completed on all our servers and thousands of virtual machines without any impact.&lt;/p&gt;
&lt;p&gt;You can contact &lt;a href=&#34;https://console.clever-cloud.com/ticket-center-choice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;our support team&lt;/a&gt; if you have further questions about this topic.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Backdoor in xz/liblzma (CVE-2024-3094): our response</title>
      <link>https://lafillepassympa.com/developers/changelog/2024-04-04-cve-2024-3094/</link>
      <pubDate>Wed, 03 Apr 2024 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/changelog/2024-04-04-cve-2024-3094/</guid>
      <description>
        
        
        &lt;p&gt;On March 29th, we were informed that a backdoor was discovered in the source code of &lt;code&gt;xz&lt;/code&gt;, introduced with version 5.6.0 (CVE-2024-3094). Our security team instantly made sanity checks, and found our services were not impacted.&lt;/p&gt;
&lt;p&gt;As stated &lt;a href=&#34;https://nvd.nist.gov/vuln/detail/CVE-2024-3094&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;by NIST&lt;/a&gt;, « &lt;em&gt;Through a series of complex obfuscations, the liblzma build process extracts a prebuilt object file from a disguised test file existing in the source code, which is then used to modify specific functions in the liblzma code. This results in a modified liblzma library that can be used by any software linked against this library, intercepting and modifying the data interaction with this library.&lt;/em&gt; ».&lt;/p&gt;
&lt;p&gt;First, the malicious version was not deployed on images we use for most of our services. Second, we don&amp;rsquo;t use patches to suppport systemd within OpenSSH through libsystemd (which depends on the backdoored libzma). Third, some GNU/Linux distributions were specifically targeted, not &lt;a href=&#34;https://www.exherbolinux.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Exherbo Linux&lt;/a&gt; which we use for our services.&lt;/p&gt;
&lt;p&gt;Nevertheless, we immediatly put the backdoored version on a deny list to prevent its installation, and so did Exherbo Linux maintainers promptly after. We also started to revert &lt;code&gt;xz&lt;/code&gt; 5.6.x to 5.4.6 on the few custom services where it had been set up, although it would not have been possible for an attacker to exploit it.&lt;/p&gt;
&lt;p&gt;You can know more about this CVE following these links:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://boehs.org/node/everything-i-know-about-the-xz-backdoor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://boehs.org/node/everything-i-know-about-the-xz-backdoor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gynvael.coldwind.pl/?lang=en&amp;amp;id=782&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://gynvael.coldwind.pl/?lang=en&amp;id=782&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lcamtuf.substack.com/p/technologist-vs-spy-the-xz-backdoor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://lcamtuf.substack.com/p/technologist-vs-spy-the-xz-backdoor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.openwall.com/lists/oss-security/2024/03/29/4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.openwall.com/lists/oss-security/2024/03/29/4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can contact &lt;a href=&#34;https://console.clever-cloud.com/ticket-center-choice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;our support team&lt;/a&gt; if you have further questions about this topic.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>OAuth tokens expiration</title>
      <link>https://lafillepassympa.com/developers/changelog/2024-03-12-oauth-token-expiration/</link>
      <pubDate>Tue, 12 Mar 2024 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/changelog/2024-03-12-oauth-token-expiration/</guid>
      <description>
        
        
        &lt;p&gt;When you connect to Clever Cloud&amp;rsquo;s interfaces, such as API, Console or CLI, you use OAuth tokens. They are now valid for a certain amount of time, and you need to refresh it before it expires.&lt;/p&gt;
&lt;p&gt;The duration of the token is 1 year for &lt;a href=&#34;https://github.com/CleverCloud/clever-tools&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Clever Tools&lt;/a&gt;, 3 months for &lt;a href=&#34;https://console.clever-cloud.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Console&lt;/a&gt; and any other integration. The expiration date of the token is mentioned at the time of its creation from CLI, you can also check it from &lt;a href=&#34;https://console.clever-cloud.com/users/me/tokens&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Console&lt;/a&gt;. You can still revoke tokens at any time from the same (enhanced) page. We&amp;rsquo;ll add such information in future releases of Clever Tools.&lt;/p&gt;
&lt;p&gt;Please note that if you ask a member of our support team to access your account, this interface will show their own token, you can revoke, valid for 12 hours. This change is part of our ongoing effort to improve &lt;a href=&#34;https://www.clever-cloud.com/security/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;the security&lt;/a&gt; of our users&amp;rsquo; accounts and data. If you have any questions or concerns, please &lt;a href=&#34;https://console.clever-cloud.com/ticket-center-choice&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;contact us&lt;/a&gt;.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>February 2024 images update (part 1)</title>
      <link>https://lafillepassympa.com/developers/changelog/2024-02-02-images-update/</link>
      <pubDate>Fri, 02 Feb 2024 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/changelog/2024-02-02-images-update/</guid>
      <description>
        
        
        &lt;p&gt;Over the past few months, we&amp;rsquo;ve overhauled the way we build our applications and add-ons images from tooling to included binaries. We&amp;rsquo;ll deliver soon the first public milestone of this project, which will leads us to more frequent releases.&lt;/p&gt;
&lt;p&gt;In the meantime, we&amp;rsquo;ve updated Docker, Erlang, Go, Haskell, Ruby and Rust images into production with no impact for our users. They include security patches and now use Linux kernel 6.7.1, OpenSSL 3.2.1 and Node.js 20.11.0 by default. For the latter, you can change it in the updated images via the &lt;code&gt;CC_NODE_VERSION&lt;/code&gt; &lt;a href=&#34;https://lafillepassympa.com/developers/doc/reference/reference-environment-variables/#commons-to-all-applications&#34; &gt;environment variable&lt;/a&gt;. Other changes are as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Docker&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;moby 25.0.2&lt;/li&gt;
&lt;li&gt;runc 1.1.12&lt;/li&gt;
&lt;li&gt;containerd 1.7.13&lt;/li&gt;
&lt;li&gt;docker-cli 25.0.2&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Erlang&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;elixir 1.15.7, erlang 26.2.1&lt;/li&gt;
&lt;li&gt;elixir 1.16.0, erlang 26.2.1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rust&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;Stable: 1.75.0&lt;/li&gt;
&lt;li&gt;Beta: 1.76.0&lt;/li&gt;
&lt;li&gt;Nightly: 1.77.0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Go&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;go 1.21.6&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Other images will be updated the same way in the coming days.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Encryption at rest</title>
      <link>https://lafillepassympa.com/developers/doc/administrate/encryption-at-rest/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lafillepassympa.com/developers/doc/administrate/encryption-at-rest/</guid>
      <description>
        
        
        &lt;h2&gt;Introduction&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;introduction&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#introduction&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Encrypting your data at rest provides another security layer to protect your data from various security threats. By default and unless you implemented it in your code, the data stored on disk is not encrypted. Enabling encryption at rest allows you to make sure your data can&amp;rsquo;t be read by anyone having a physical access to the hard drive.&lt;/p&gt;
&lt;p&gt;Encryption at rest only protects the data &amp;ldquo;at rest&amp;rdquo;, meaning that if your data is sent over an unencrypted channel on the network, it could be read on the fly. The scenario encryption at rest covers are mostly hard drives stealing or unauthorized access once the hard drive got removed.&lt;/p&gt;
&lt;p&gt;Here at Clever Cloud, before removing a hard drive, either because it is faulty or not used anymore, we first &lt;a href=&#34;https://linux.die.net/man/1/shred&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shred&lt;/a&gt; the hard drive with multiple passes. Then it is physically damaged by the data center operators before being thrown away. If one of those steps are missing or fail for some reason, your data could still be read if you didn&amp;rsquo;t use encryption at rest. If you did, no one will be able to access it.&lt;/p&gt;
&lt;h2&gt;Technical details&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;technical-details&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#technical-details&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Encryption at rest works by decrypting the encrypted data disk and exposing it to the system in an unencrypted volume. Each time you read data on this unencrypted volume, the system will fetch the data on the encrypted disk and decrypt it. If you write data, the opposite happens: the data to be written is encrypted and then its encrypted content is written to the encrypted disk.&lt;/p&gt;
&lt;p&gt;Each add-on has a randomly generated encryption key used to encrypt the data disk. The key will stay the same during the add-on life but can be changed if needed. In that case, a migration will use the new passphrase.&lt;/p&gt;
&lt;p&gt;We use the &lt;a href=&#34;https://gitlab.com/cryptsetup/cryptsetup&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cryptsetup tool&lt;/a&gt; to operate encrypted disks. Cryptsetup&amp;rsquo;s current default is &lt;a href=&#34;https://gitlab.com/cryptsetup/LUKS2-docs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LUKS2&lt;/a&gt; with &lt;code&gt;aes-xts&lt;/code&gt; as the encryption algorithm. This may be subject to change as cryptsetup and the security algorithms evolve.&lt;/p&gt;
&lt;p&gt;The encryption key is only stored encrypted on our systems and is not stored on your add-on. When your add-on boots, the key is downloaded over HTTPS from our systems and the disk is then mounted.&lt;/p&gt;
&lt;p&gt;We also have a small swap partition on add-ons to allow more available RAM for background services. This swap file is also encrypted to avoid any encrypted data leak.&lt;/p&gt;
&lt;h3&gt;Performances&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;performances&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#performances&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Performances may be a bit degraded with encryption enabled but in most of the cases under regular load, it is usually insignificant and an acceptable tradeoff.&lt;/p&gt;
&lt;p&gt;Also, depending on whether you are using a single vCPU add-on or a multiple vCPU one, numbers can greatly vary. Single vCPU instances will switch between decrypting/encrypting the data and reading/writing it to the disk while multiple vCPU instances will be able to parallelize those operations, leading to better performance.&lt;/p&gt;
&lt;p&gt;Note that most of the databases either have an in-memory cache or use the system&amp;rsquo;s file cache so if the same data is often read, it may be available in the cache and no decryption occur leading to fast reads.&lt;/p&gt;
&lt;p&gt;Those tests were made using a 4 vCPU instance with 4 GiB of RAM.
Before each test, the system&amp;rsquo;s cache was dropped to avoid having reads that are faster than they should be: &lt;code&gt;sync; echo 1 &amp;gt; /proc/sys/vm/drop_caches&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Note: The &lt;code&gt;dd&lt;/code&gt; tool wasn&amp;rsquo;t used for this benchmark as it does not represent a valid workload, leading to results that can greatly vary depending on disk performance.&lt;/p&gt;
&lt;h4&gt;Using pgbench for PostgreSQL&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;using-pgbench-for-postgresql&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#using-pgbench-for-postgresql&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Using &lt;code&gt;pgbench&lt;/code&gt; with 20 jobs and 20 clients, we see a difference between 3% and 5% less transactions per second on the encrypted disk and no real CPU difference.&lt;/p&gt;
&lt;p&gt;With encrypted disk, the number of transactions per second was 315. On the unencrypted one, it was 330 per second.&lt;/p&gt;
&lt;h4&gt;Using sysbench for MySQL&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;using-sysbench-for-mysql&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#using-sysbench-for-mysql&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Using &lt;code&gt;sysbench&lt;/code&gt; with 6 threads, the difference is between 5% and 10% less transactions per second. The CPU usage is also between 5% and 10% higher depending on the work load (reads or writes).&lt;/p&gt;
&lt;p&gt;With encrypted disk, the number of transactions per second was 635. On the unencrypted one, it was 703 per second.&lt;/p&gt;
&lt;h2&gt;Availability&lt;span class=&#34;hx-absolute -hx-mt-20&#34; id=&#34;availability&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#availability&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Encryption at rest is currently available for the following add-ons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQL&lt;/li&gt;
&lt;li&gt;MySQL&lt;/li&gt;
&lt;li&gt;MongoDB&lt;/li&gt;
&lt;li&gt;Redis&lt;/li&gt;
&lt;li&gt;Elastic Stack&lt;/li&gt;
&lt;li&gt;Jenkins&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Only dedicated add-ons have the option. If your add-on is not encrypted, you can ask our support team to configure it. A migration will then be needed to encrypt your disk.&lt;/p&gt;

      </description>
    </item>
    
  </channel>
</rss>
